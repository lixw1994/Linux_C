int open(const char* name, int flags, ...);
open调用的flags参数：
O_RDONLY        以只读方式打开
O_WRONLY        以只写方式打开
O_RDWR          以读写方式打开
O_CLOEXEC       设置close-on-exec标志(Linux 2.6.23)
O_CREATE        若文件不存在创建
O_EXCL          结合CREATE，保证检测文件和创建文件是原子操作
O_DIRECT        无缓冲输入输出
O_DIRECTORY     如果pathname不是目录，则失败
O_LARGEFILE     32位下以此标志位打开*大文件*
O_NOATIME       调用read()不修改文件最近访问时间(Linux 2.6.8)
O_NOCTTY        不要让pathname(所指向的终端设备)成为控制终端
O_NOFOLLOW      对符号链接不予以解引用
O_TRUNC         截断已有文件，使其长度为0
O_APPEND        总在文件尾部追加数据
O_ASYNC         当IO操作可行时，产生信号通知进程
O_DSYNC         提供同步的IO数据完整性(Linux 2.6.33)
O_NONBLOCK      以非阻塞方式打开
O_SYNC          以同步方式打开
-----------------------------------------------------
ssize_t read(int fd, void* buf, size_t count);
read()返回实际读取的字节数。
需要注意的是，read()可以读取任意序列的字节，因此无法遵循C语言对字符串处理的约定(\0打断)
如果输入缓冲区的结尾处需要一个表示终止的空字符。需显式追加。由于表示字符串终止需要一个字节
的内存，所以缓冲区至少要比预计读取的字节数多一个字节。
同样write()返回实际的写入的字节数。
------------------------------------------------------
off_t lssek(int fd, off_t offset, int whence);
文件打开时，会将文件偏移量设置为指向文件开始处，以后每次调用read()或者write()将对其调整。
whence : SEEK_SET(文件起点处)  SEEK_CUR(当前偏移量)   SEEK_END(文件结尾处)
文件空洞：如果程序的文件偏移量已然跨越了文件结尾，然后在执行IO操作，将会发生什么？read()
    调用将返回0，表示文件结尾。有点惊讶的是，write()函数仍旧可以文件结尾后的位置写入数据。
    从文件结尾但新写入数据之间空间成为文件空洞。从编程角度看，文件空洞是存在字节的；然而，文
    件空洞不占用磁盘空间，知道后续某个时段，在文件空洞写入了数据擦会为其分配磁盘。
--------------------------------------------------------
int fcntl(int fd, int cmd, ...);
使用fcntl()获取和修改文件的状态标志，尤其使用一下场景：
    文件不是由调用程序打开的，所以程序无法使用open()调用控制文件状态。
    文件描述符的获取是通过open()之外的系统调用。比如pipe,socket等等。
---------------------------------------------------------
文件描述符和打开文件之间的关系：
    注意内核维护的三个数据结构：进程级的文件描述符表；系统的打开文件表； 文件系统的i-node表
---------------------------------------------------------
三个有用的函数：
    复制文件描述符：操作同一文件，有着相同的文件状态。
        dup系列和fcntl(fd, F_DUPFD, startfd);
    在文件特定偏移量处的I\O:
        pread/pwrite(int fd, void* buf, size_t count, off_t offset);
        两个好处：不改变文件偏移量；比起lseek+read/write组合速度较快。
    分散输入和集中输出：
        readv/writev(int fd, const struct iovec* iov, int iovcnt);
        两个好处：相比向多个缓冲区多次调用read/write,效率较高，保证了原子性。
---------------------------------------------------------












